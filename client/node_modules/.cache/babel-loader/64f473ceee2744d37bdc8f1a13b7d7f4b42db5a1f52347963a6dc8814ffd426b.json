{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useSearchParams}from'react-router-dom';import axios from'axios';import{Plus,Loader}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProductCard=_ref=>{let{product,addToCart}=_ref;const[isLoading,setIsLoading]=useState(false);const[selectedSize,setSelectedSize]=useState(null);const hasSizes=product.hasSizes;const handleAddToCart=()=>{setIsLoading(true);const productToAdd=hasSizes?{...product,size:selectedSize||'M'}:product;addToCart(productToAdd);setTimeout(()=>setIsLoading(false),500);};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col bg-white rounded-2xl overflow-hidden h-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"aspect-[4/5] overflow-hidden bg-amber-50\",children:/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.name,className:\"w-full h-full object-cover object-center\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col flex-grow p-6 bg-amber-100/50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start gap-4 mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-amber-900 leading-tight\",children:product.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-amber-700 whitespace-nowrap\",children:[\"$\",(product.price/100).toFixed(2)]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-amber-600 line-clamp-2 mb-4\",children:product.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-auto\",children:[hasSizes&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2 mb-4\",children:['XS','S','M','L','XL'].map(size=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedSize(size),className:`w-auto px-3 h-9 rounded-full text-sm font-medium\n                             transition-colors ${selectedSize===size?'bg-amber-900 text-white':'bg-white text-amber-900 hover:bg-amber-200'}`,children:size},size))})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddToCart,disabled:hasSizes&&!selectedSize,className:`w-full flex items-center justify-center gap-2 py-2 px-4 \n                     rounded-lg transition-colors ${!hasSizes||selectedSize?'bg-amber-100 hover:bg-amber-200 text-amber-900':'bg-amber-50 text-amber-400 cursor-not-allowed'}`,children:isLoading?/*#__PURE__*/_jsx(Loader,{className:\"w-4 h-4 animate-spin\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Add to Bag\"})]})})]})]})]});};const ProductsPage=_ref2=>{let{addToCart}=_ref2;const[products,setProducts]=useState([]);const[isLoading,setIsLoading]=useState(true);const[searchParams]=useSearchParams();const searchQuery=searchParams.get('search')||'';useEffect(()=>{const fetchProducts=async()=>{try{const res=await axios.get(\"https://cozy-threads-jjot.onrender.com/products\");setProducts(res.data);setIsLoading(false);}catch(err){console.error(\"Error fetching products:\",err);setIsLoading(false);}};fetchProducts();},[]);// Filter products based on search query\nconst filteredProducts=products.filter(product=>searchQuery?product.name.toLowerCase().includes(searchQuery.toLowerCase())||product.description.toLowerCase().includes(searchQuery.toLowerCase()):true);if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center py-32\",children:/*#__PURE__*/_jsx(Loader,{className:\"w-8 h-8 text-amber-600 animate-spin\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-32 pb-24\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-12\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-serif text-amber-900 mb-4\",children:searchQuery?`Search Results for \"${searchQuery}\"`:'All Products'}),searchQuery&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-amber-600\",children:[\"Found \",filteredProducts.length,\" product\",filteredProducts.length!==1?'s':'']})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8\",children:filteredProducts.map(product=>/*#__PURE__*/_jsx(ProductCard,{product:product,addToCart:addToCart},product.id))}),filteredProducts.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-amber-600\",children:\"No products found matching your search.\"})})]});};export default ProductsPage;","map":{"version":3,"names":["React","useState","useEffect","useSearchParams","axios","Plus","Loader","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductCard","_ref","product","addToCart","isLoading","setIsLoading","selectedSize","setSelectedSize","hasSizes","handleAddToCart","productToAdd","size","setTimeout","className","children","src","image","alt","name","price","toFixed","description","map","onClick","disabled","ProductsPage","_ref2","products","setProducts","searchParams","searchQuery","get","fetchProducts","res","data","err","console","error","filteredProducts","filter","toLowerCase","includes","length","id"],"sources":["/Users/brooklyngibbs/cozy-threads/client/src/pages/ProductsPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { Plus, Loader } from 'lucide-react';\n\nconst ProductCard = ({ product, addToCart }) => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [selectedSize, setSelectedSize] = useState(null);\n  const hasSizes = product.hasSizes;\n  \n  const handleAddToCart = () => {\n    setIsLoading(true);\n    const productToAdd = hasSizes \n      ? { ...product, size: selectedSize || 'M' }\n      : product;\n    \n    addToCart(productToAdd);\n    setTimeout(() => setIsLoading(false), 500);\n  };\n\n  return (\n    <div className=\"flex flex-col bg-white rounded-2xl overflow-hidden h-full\">\n      {/* Image */}\n      <div className=\"aspect-[4/5] overflow-hidden bg-amber-50\">\n        <img \n          src={product.image} \n          alt={product.name} \n          className=\"w-full h-full object-cover object-center\"\n        />\n      </div>\n\n      {/* Content */}\n      <div className=\"flex flex-col flex-grow p-6 bg-amber-100/50\">\n        <div className=\"flex justify-between items-start gap-4 mb-3\">\n          <h3 className=\"text-lg font-medium text-amber-900 leading-tight\">\n            {product.name}\n          </h3>\n          <span className=\"text-sm font-medium text-amber-700 whitespace-nowrap\">\n            ${(product.price / 100).toFixed(2)}\n          </span>\n        </div>\n        \n        <p className=\"text-sm text-amber-600 line-clamp-2 mb-4\">\n          {product.description}\n        </p>\n\n        {/* Size Selection */}\n        <div className=\"mt-auto\">\n          {hasSizes && (\n            <div className=\"mb-4\">\n              <div className=\"flex flex-wrap gap-2 mb-4\">\n                {['XS', 'S', 'M', 'L', 'XL'].map((size) => (\n                  <button\n                    key={size}\n                    onClick={() => setSelectedSize(size)}\n                    className={`w-auto px-3 h-9 rounded-full text-sm font-medium\n                             transition-colors ${\n                               selectedSize === size \n                                 ? 'bg-amber-900 text-white' \n                                 : 'bg-white text-amber-900 hover:bg-amber-200'\n                             }`}\n                  >\n                    {size}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n\n          <button\n            onClick={handleAddToCart}\n            disabled={hasSizes && !selectedSize}\n            className={`w-full flex items-center justify-center gap-2 py-2 px-4 \n                     rounded-lg transition-colors ${\n                       (!hasSizes || selectedSize)\n                         ? 'bg-amber-100 hover:bg-amber-200 text-amber-900'\n                         : 'bg-amber-50 text-amber-400 cursor-not-allowed'\n                     }`}\n          >\n            {isLoading ? (\n              <Loader className=\"w-4 h-4 animate-spin\" />\n            ) : (\n              <>\n                <Plus className=\"w-4 h-4\" />\n                <span>Add to Bag</span>\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst ProductsPage = ({ addToCart }) => {\n  const [products, setProducts] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [searchParams] = useSearchParams();\n  const searchQuery = searchParams.get('search') || '';\n\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const res = await axios.get(\"https://cozy-threads-jjot.onrender.com/products\");\n        setProducts(res.data);\n        setIsLoading(false);\n      } catch (err) {\n        console.error(\"Error fetching products:\", err);\n        setIsLoading(false);\n      }\n    };\n\n    fetchProducts();\n  }, []);\n\n  // Filter products based on search query\n  const filteredProducts = products.filter(product => \n    searchQuery \n      ? product.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        product.description.toLowerCase().includes(searchQuery.toLowerCase())\n      : true\n  );\n\n  if (isLoading) {\n    return (\n      <div className=\"flex justify-center items-center py-32\">\n        <Loader className=\"w-8 h-8 text-amber-600 animate-spin\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-32 pb-24\">\n      {/* Header */}\n      <div className=\"text-center mb-12\">\n        <h1 className=\"text-3xl font-serif text-amber-900 mb-4\">\n          {searchQuery ? `Search Results for \"${searchQuery}\"` : 'All Products'}\n        </h1>\n        {searchQuery && (\n          <p className=\"text-amber-600\">\n            Found {filteredProducts.length} product{filteredProducts.length !== 1 ? 's' : ''}\n          </p>\n        )}\n      </div>\n\n      {/* Products Grid */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8\">\n        {filteredProducts.map((product) => (\n          <ProductCard \n            key={product.id} \n            product={product} \n            addToCart={addToCart}\n          />\n        ))}\n      </div>\n\n      {/* No Results Message */}\n      {filteredProducts.length === 0 && (\n        <div className=\"text-center py-12\">\n          <p className=\"text-lg text-amber-600\">\n            No products found matching your search.\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ProductsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}